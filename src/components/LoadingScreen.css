.loading-screen {
  position: fixed;
  inset: 0;
  z-index: 10000;
  background: var(--black);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: opacity 0.5s ease, visibility 0.5s ease;
}

.loading-screen.fadeout {
  opacity: 0;
  visibility: hidden;
}

/* Scan lines overlay */
.loading-scanlines {
  position: absolute;
  inset: 0;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(0, 0, 0, 0.3) 2px,
    rgba(0, 0, 0, 0.3) 4px
  );
  pointer-events: none;
  opacity: 0.5;
}

/* Static noise */
.loading-static {
  position: absolute;
  inset: 0;
  opacity: 0.1;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  animation: staticFlicker 0.1s infinite;
}

@keyframes staticFlicker {
  0%, 100% { opacity: 0.1; }
  50% { opacity: 0.15; }
}

/* Main content */
.loading-content {
  position: relative;
  z-index: 2;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2rem;
}

/* Logo */
.loading-logo {
  position: relative;
}

.loading-logo-text {
  font-family: var(--font-mono);
  font-size: clamp(4rem, 15vw, 10rem);
  font-weight: 700;
  color: var(--white);
  letter-spacing: 0.2em;
  position: relative;

  /* Glitch effect */
  animation: logoGlitch 0.3s infinite;
}

.loading-screen.reveal .loading-logo-text,
.loading-screen.fadeout .loading-logo-text {
  animation: logoReveal 0.5s ease forwards;
}

.loading-logo-text::before,
.loading-logo-text::after {
  content: attr(data-text);
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.loading-logo-text::before {
  color: var(--red);
  animation: glitchBefore 0.3s infinite;
  clip-path: polygon(0 0, 100% 0, 100% 35%, 0 35%);
}

.loading-logo-text::after {
  color: cyan;
  animation: glitchAfter 0.3s infinite;
  clip-path: polygon(0 65%, 100% 65%, 100% 100%, 0 100%);
}

.loading-screen.reveal .loading-logo-text::before,
.loading-screen.reveal .loading-logo-text::after,
.loading-screen.fadeout .loading-logo-text::before,
.loading-screen.fadeout .loading-logo-text::after {
  animation: none;
  opacity: 0;
}

@keyframes logoGlitch {
  0%, 100% {
    transform: translate(0);
    opacity: 1;
  }
  10% {
    transform: translate(-5px, 2px);
    opacity: 0.8;
  }
  20% {
    transform: translate(5px, -2px);
    opacity: 0.9;
  }
  30% {
    transform: translate(-3px, -1px);
    opacity: 0.7;
  }
  40% {
    transform: translate(3px, 1px);
    opacity: 1;
  }
  50% {
    transform: translate(-2px, 3px);
    opacity: 0.85;
  }
  60% {
    transform: translate(2px, -3px);
    opacity: 0.95;
  }
}

@keyframes glitchBefore {
  0%, 100% { transform: translate(0); }
  20% { transform: translate(-3px, 0); }
  40% { transform: translate(3px, 0); }
  60% { transform: translate(-2px, 0); }
  80% { transform: translate(2px, 0); }
}

@keyframes glitchAfter {
  0%, 100% { transform: translate(0); }
  20% { transform: translate(3px, 0); }
  40% { transform: translate(-3px, 0); }
  60% { transform: translate(2px, 0); }
  80% { transform: translate(-2px, 0); }
}

@keyframes logoReveal {
  0% {
    transform: translate(0);
    text-shadow: -2px 0 var(--red), 2px 0 cyan;
  }
  100% {
    transform: translate(0);
    text-shadow: 0 0 30px var(--red), 0 0 60px var(--red-dark);
  }
}

/* Loading bar */
.loading-bar-container {
  width: 200px;
  height: 2px;
  background: var(--black-lighter);
  position: relative;
  overflow: hidden;
}

.loading-bar {
  height: 100%;
  background: var(--red);
  animation: loadingBar 2s ease-in-out forwards;
  box-shadow: 0 0 10px var(--red), 0 0 20px var(--red-dark);
}

@keyframes loadingBar {
  0% { width: 0%; }
  20% { width: 20%; }
  50% { width: 60%; }
  80% { width: 85%; }
  100% { width: 100%; }
}

/* Subtitle */
.loading-subtitle {
  font-family: var(--font-mono);
  font-size: 0.8rem;
  color: var(--white-dim);
  letter-spacing: 0.3em;
  text-transform: uppercase;
  display: flex;
  gap: 0.25rem;
}

.loading-dots {
  animation: dotsFlicker 1s infinite;
}

@keyframes dotsFlicker {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.3; }
}

/* Glitch fragments */
.loading-fragments {
  position: absolute;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
}

.loading-fragment {
  position: absolute;
  top: 50%;
  left: 50%;
  font-family: var(--font-mono);
  font-size: clamp(2rem, 8vw, 5rem);
  font-weight: 700;
  color: var(--red);
  opacity: 0;
  transform: translate(-50%, -50%);
  animation: fragmentGlitch 0.3s infinite;
  animation-delay: var(--delay);
}

.loading-screen.glitch .loading-fragment {
  animation: fragmentGlitch 0.15s infinite;
}

.loading-screen.reveal .loading-fragment,
.loading-screen.fadeout .loading-fragment {
  animation: fragmentFade 0.5s ease forwards;
}

@keyframes fragmentGlitch {
  0%, 90%, 100% {
    opacity: 0;
    transform: translate(-50%, -50%);
  }
  92% {
    opacity: 0.7;
    transform: translate(
      calc(-50% + var(--offset-x)),
      calc(-50% + var(--offset-y))
    );
  }
  94% {
    opacity: 0;
  }
  96% {
    opacity: 0.5;
    transform: translate(
      calc(-50% - var(--offset-x) * 0.5),
      calc(-50% - var(--offset-y) * 0.5)
    );
  }
}

@keyframes fragmentFade {
  to {
    opacity: 0;
    transform: translate(-50%, -50%) scale(1.5);
  }
}

/* VHS distortion lines */
.loading-screen::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(
    90deg,
    transparent 0%,
    var(--red) 15%,
    transparent 30%,
    cyan 50%,
    transparent 70%,
    var(--red) 85%,
    transparent 100%
  );
  animation: vhsLine 2s linear infinite;
  opacity: 0.5;
}

@keyframes vhsLine {
  0% { top: -3px; }
  100% { top: 100%; }
}

/* Screen flicker */
.loading-screen.glitch::after {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--white);
  opacity: 0;
  animation: screenFlicker 0.2s infinite;
  pointer-events: none;
}

@keyframes screenFlicker {
  0%, 95%, 100% { opacity: 0; }
  96% { opacity: 0.03; }
}
